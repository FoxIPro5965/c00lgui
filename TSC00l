local runService = game:GetService("RunService")
local players = game:GetService("Players")
local localPlayer = players.LocalPlayer
local character = localPlayer.Character
local humanoid = character and character:WaitForChild("Humanoid")
local humanoidRootPart = character and character:WaitForChild("HumanoidRootPart")
local playerUserId = localPlayer.UserId
local playerName = localPlayer.Name

--

-- exploits
local function exploits()

    if workspace:GetAttribute("VIPServer") ~= tostring(playerUserId) then
        workspace:SetAttribute("VIPServer", tostring(playerUserId))
    end
    if workspace:GetAttribute("VIPServerOwner") ~= playerName then
        workspace:SetAttribute("VIPServerOwner", playerName)
    end
    --

    if localPlayer:GetAttribute("ExtraSlots") == nil then
        localPlayer:SetAttribute("ExtraSlots", false)
    end
    --
    if localPlayer:GetAttribute("EmoteSearchBar") == nil then
        localPlayer:SetAttribute("EmoteSearchBar", false)
    end
    --
    if workspace:GetAttribute("NoDashCooldown") == nil then
        workspace:SetAttribute("NoDashCooldown", false)
    end
    --
    if workspace:GetAttribute("NoFatigue") == nil then
        workspace:SetAttribute("NoFatigue", false)
    end

end
exploits()

-- 
local tspeed = 0.1
local tpwalking = false

--

--
local Rayfield = loadstring(game:HttpGet('https://sirius.menu/rayfield'))()

local Window = Rayfield:CreateWindow({
   Name = "TSC00l",
   Icon = "user",
   LoadingTitle = "c00lgui",
   LoadingSubtitle = "The Strongest Battleground",
   ShowText = "c00lgui",
   Theme = "Default",

   ToggleUIKeybind = "K",

   DisableRayfieldPrompts = false,
   DisableBuildWarnings = false,

   ConfigurationSaving = {
      Enabled = true,
      FolderName = nil,
      FileName = "TSB-Script"
   },

   Discord = {
      Enabled = false, 
      Invite = "noinvitelink", 
      RememberJoins = true 
   },

   KeySystem = false, 
   KeySettings = {
      Title = "Untitled",
      Subtitle = "Key System",
      Note = "No method of obtaining the key is provided",
      FileName = "Key",
      SaveKey = true, 
      GrabKeyFromSite = false, 
      Key = {"Hello"} 
   }
})
--

-- as tabs- 
local mainTab = Window:CreateTab("Main", "user")
local teleportTab = Window:CreateTab("Teleport", "map")
--
local autoPunch = false
local PUNCH_DISTANCE = 16
local punchDelay = 0.15

local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local LocalPlayer = Players.LocalPlayer

-- tìm remote punch (TSB thường đổi tên)
local function getPunchRemote()
    for _,v in pairs(game.ReplicatedStorage:GetDescendants()) do
        if v:IsA("RemoteEvent") and (v.Name:lower():find("punch") or v.Name:lower():find("hit")) then
            return v
        end
    end
end

local PunchRemote = getPunchRemote()

local function getClosestPlayer()
    local char = LocalPlayer.Character
    local hrp = char and char:FindFirstChild("HumanoidRootPart")
    if not hrp then return end

    local closest, dist = nil, math.huge
    for _,plr in pairs(Players:GetPlayers()) do
        if plr ~= LocalPlayer and plr.Character and plr.Character:FindFirstChild("HumanoidRootPart") then
            local d = (plr.Character.HumanoidRootPart.Position - hrp.Position).Magnitude
            if d < dist then
                dist = d
                closest = plr
            end
        end
    end
    return closest, dist
end

-- Auto Punch Loop
task.spawn(function()
    while task.wait(punchDelay) do
        if autoPunch and PunchRemote then
            local target, dist = getClosestPlayer()
            if target and dist <= PUNCH_DISTANCE then
                PunchRemote:FireServer()
            end
        end
    end
end)
localPlayer.CharacterAdded:Connect(function(char)
    character = char
    humanoid = character:WaitForChild("Humanoid")
    humanoidRootPart = character:WaitForChild("HumanoidRootPart")
end)

mainTab:CreateDivider()

mainTab:CreateToggle({
   Name = "Speed Boost",
   CurrentValue = false,
   Flag = "SpeedBoostToggle",
   Callback = function(Value)
       tpwalking = Value
   end,
})

mainTab:CreateSlider({
   Name = "Speed",
   Range = {0, 5},
   Increment = 0.1,
   Suffix = "*",
   CurrentValue = 0.1,
   Flag = "SpeedBoostSlider",
   Callback = function(Value)
       tspeed = Value
   end,
})

runService.Heartbeat:Connect(function()
    if tpwalking and character and humanoid then
        if humanoid.MoveDirection.Magnitude > 0 then
            if tspeed then
                 humanoidRootPart.CFrame = humanoidRootPart.CFrame + (humanoid.MoveDirection * tspeed)
            end
        end
    end
end)

mainTab:CreateToggle({
   Name = "Jump Boost",
   CurrentValue = false,
   Flag = "JumpBoostToggle",
   Callback = function(Value)
       humanoid.UseJumpPower = not Value
   end,
})

mainTab:CreateSlider({
   Name = "Jump",
   Range = {7.2, 500},
   Increment = 0.1,
   Suffix = "%",
   CurrentValue = 7.2,
   Flag = "JumpBoostSlider",
   Callback = function(Value)
       humanoid.JumpHeight = Value
   end,
})

mainTab:CreateDivider()

mainTab:CreateSlider({
   Name = "Gravity",
   Range = {0, 192.6},
   Increment = 0.1,
   Suffix = "%",
   CurrentValue = 192.6,
   Flag = "GravitySlider",
   Callback = function(Value)
       workspace.Gravity = Value
   end,
})

mainTab:CreateSlider({
   Name = "FOV",
   Range = {0, 120},
   Increment = 0.1,
   Suffix = "%",
   CurrentValue = 70,
   Flag = "FOVSlider",
   Callback = function(Value)
       workspace.CurrentCamera.FieldOfView = Value
   end,
})

mainTab:CreateDivider()

mainTab:CreateSection("Exploits")

mainTab:CreateToggle({
   Name = "No Dash Cooldown",
   CurrentValue = false,
   Flag = "noDashCooldownToggle",
   Callback = function(Value)
       workspace:SetAttribute("NoDashCooldown", Value)
   end,
})

mainTab:CreateToggle({
   Name = "No Fatigue",
   CurrentValue = false,
   Flag = "noFatigueToggle",
   Callback = function(Value)
       workspace:SetAttribute("NoFatigue", Value)
   end,
})
mainTab:CreateToggle({
    Name = "Auto Punch (16 Studs)",
    CurrentValue = false,
    Flag = "AutoPunchToggle",
    Callback = function(Value)
        autoPunch = Value
    end,
})

mainTab:CreateDivider()

mainTab:CreateToggle({
   Name = "Emotes Extra Slots",
   CurrentValue = false,
   Flag = "emotesExtraSlotsToggle",
   Callback = function(Value)
         localPlayer:SetAttribute("ExtraSlots", Value)
   end,
})

mainTab:CreateToggle({
   Name = "Emotes Search Bar",
   CurrentValue = false,
   Flag = "emotesSearchBarToggle",
   Callback = function(Value)
       localPlayer:SetAttribute("EmoteSearchBar", Value)
   end,
})

teleportTab:CreateSection("Teleports")

teleportTab:CreateButton({
    Name = "middle",
    Callback = function()
        humanoidRootPart.CFrame = CFrame.new(148, 441, 27)
    end
})

teleportTab:CreateButton({
    Name = "Atomic Room",
    Callback = function()
        humanoidRootPart.CFrame = CFrame.new(1079, 155, 23003)
    end
})

teleportTab:CreateButton({
    Name = "Death Counter Room",
    Callback = function()
        humanoidRootPart.CFrame = CFrame.new(-92, 29, 20347)
    end
})

teleportTab:CreateButton({
    Name = "Baseplate",
    Callback = function()
        humanoidRootPart.CFrame = CFrame.new(968, 20, 23088)
    end
})

teleportTab:CreateButton({
    Name = "Mountain 1",
    Callback = function()
        humanoidRootPart.CFrame = CFrame.new(266, 699, 458)
    end
})

teleportTab:CreateButton({
    Name = "Mountain 2",
    Callback = function()
        humanoidRootPart.CFrame = CFrame.new(551, 630, -265)
    end
})

teleportTab:CreateButton({
    Name = "Mountain 3",
    Callback = function()
        humanoidRootPart.CFrame = CFrame.new(-107, 642, -328)
    end
})
local aimTab = Window:CreateTab("Aim", "target")
local silentAimScript

aimTab:CreateToggle({
    Name = "Silent Aim GUI",
    CurrentValue = false,
    Flag = "SilentAimLoadToggle",
    Callback = function(Value)

        if Value then

            silentAimScript = loadstring([[
                local Players = game:GetService("Players")
                local RunService = game:GetService("RunService")
                local LocalPlayer = Players.LocalPlayer

                local silentAim = true
                local MIN_DISTANCE = 3

                local character = LocalPlayer.Character or LocalPlayer.CharacterAdded:Wait()
                local hrp = character:WaitForChild("HumanoidRootPart")

                LocalPlayer.CharacterAdded:Connect(function(char)
                    character = char
                    hrp = character:WaitForChild("HumanoidRootPart")
                end)

                -- GUI
                local gui = Instance.new("ScreenGui")
                gui.Name = "SilentAimGuiV4"
                gui.ResetOnSpawn = false
                gui.DisplayOrder = 999999
                gui.ZIndexBehavior = Enum.ZIndexBehavior.Global
                gui.Parent = LocalPlayer:WaitForChild("PlayerGui")

                local frame = Instance.new("Frame")
                frame.Size = UDim2.new(0,170,0,60)
                frame.Position = UDim2.new(0.5,-90,0.2,0)
                frame.BackgroundColor3 = Color3.fromRGB(25,25,25)
                frame.BorderSizePixel = 0
                frame.Active = true
                frame.Draggable = true
                frame.Parent = gui

                local corner = Instance.new("UICorner", frame)
                corner.CornerRadius = UDim.new(0,12)

                local stroke = Instance.new("UIStroke", frame)
                stroke.Thickness = 2
                stroke.Color = Color3.fromRGB(0,255,0)

                local title = Instance.new("TextLabel", frame)
                title.Size = UDim2.new(1,0,0.4,0)
                title.BackgroundTransparency = 1
                title.Text = "Silent Aim"
                title.TextScaled = true
                title.Font = Enum.Font.GothamBold
                title.TextColor3 = Color3.fromRGB(200,200,200)

                local button = Instance.new("TextButton", frame)
                button.Size = UDim2.new(0.85,0,0.4,0)
                button.Position = UDim2.new(0.1,0,0.5,0)
                button.BackgroundColor3 = Color3.fromRGB(35,35,35)
                button.BorderSizePixel = 0
                button.Text = "ON"
                button.TextScaled = true
                button.Font = Enum.Font.GothamBold
                button.TextColor3 = Color3.fromRGB(0,255,0)

                local bcorner = Instance.new("UICorner", button)
                bcorner.CornerRadius = UDim.new(0,8)

                local function getClosestLiving()
                    local closest
                    local dist = math.huge

                    for _,v in pairs(workspace:GetDescendants()) do
                        if v:IsA("Humanoid") and v.Health > 0 and v.Parent:FindFirstChild("HumanoidRootPart") then
                            if Players:GetPlayerFromCharacter(v.Parent) ~= LocalPlayer then
                                local d = (v.Parent.HumanoidRootPart.Position - hrp.Position).Magnitude
                                if d < dist then
                                    dist = d
                                    closest = v.Parent
                                end
                            end
                        end
                    end

                    return closest, dist
                end

                local aimConn
                aimConn = RunService.Heartbeat:Connect(function()
                    if silentAim and hrp then
                        local target, dist = getClosestLiving()
                        if target and target:FindFirstChild("HumanoidRootPart") and dist > MIN_DISTANCE then
                            local pos = target.HumanoidRootPart.Position
                            hrp.CFrame = CFrame.new(hrp.Position, Vector3.new(pos.X, hrp.Position.Y, pos.Z))
                        end
                    end
                end)

                button.MouseButton1Click:Connect(function()
                    silentAim = not silentAim

                    if silentAim then
                        button.Text = "ON"
                        button.TextColor3 = Color3.fromRGB(0,255,0)
                        stroke.Color = Color3.fromRGB(0,255,0)
                        frame.BackgroundColor3 = Color3.fromRGB(25,30,25)
                    else
                        button.Text = "OFF"
                        button.TextColor3 = Color3.fromRGB(120,120,120)
                        stroke.Color = Color3.fromRGB(120,120,120)
                        frame.BackgroundColor3 = Color3.fromRGB(30,25,25)
                    end
                end)

                getgenv().RemoveSilentAim = function()
                    if aimConn then aimConn:Disconnect() end
                    gui:Destroy()
                end
            ]])()

        else
            if getgenv().RemoveSilentAim then
                getgenv().RemoveSilentAim()
            end
        end
    end
})
