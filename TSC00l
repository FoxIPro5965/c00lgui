local runService = game:GetService("RunService")
local players = game:GetService("Players")
local localPlayer = players.LocalPlayer
local character = localPlayer.Character
local humanoid = character and character:WaitForChild("Humanoid")
local humanoidRootPart = character and character:WaitForChild("HumanoidRootPart")
local playerUserId = localPlayer.UserId
local playerName = localPlayer.Name
local VirtualInputManager = game:GetService("VirtualInputManager")
local AutoCounter = false 
--

-- exploits
local function exploits()

    if workspace:GetAttribute("VIPServer") ~= tostring(playerUserId) then
        workspace:SetAttribute("VIPServer", tostring(playerUserId))
    end
    if workspace:GetAttribute("VIPServerOwner") ~= playerName then
        workspace:SetAttribute("VIPServerOwner", playerName)
    end
    --

    if localPlayer:GetAttribute("ExtraSlots") == nil then
        localPlayer:SetAttribute("ExtraSlots", false)
    end
    --
    if localPlayer:GetAttribute("EmoteSearchBar") == nil then
        localPlayer:SetAttribute("EmoteSearchBar", false)
    end
    --
    if workspace:GetAttribute("NoDashCooldown") == nil then
        workspace:SetAttribute("NoDashCooldown", false)
    end
    --
    if workspace:GetAttribute("NoFatigue") == nil then
        workspace:SetAttribute("NoFatigue", false)
    end

end
exploits()

-- 
local tspeed = 0.1
local tpwalking = false

--

--
local Rayfield = loadstring(game:HttpGet('https://sirius.menu/rayfield'))()

local Window = Rayfield:CreateWindow({
   Name = "TSC00l",
   Icon = "user",
   LoadingTitle = "c00lgui",
   LoadingSubtitle = "The Strongest Battleground",
   ShowText = "c00lgui",
   Theme = "Default",

   ToggleUIKeybind = "K",

   DisableRayfieldPrompts = false,
   DisableBuildWarnings = false,

   ConfigurationSaving = {
      Enabled = true,
      FolderName = nil,
      FileName = "TSB-Script"
   },

   Discord = {
      Enabled = false, 
      Invite = "noinvitelink", 
      RememberJoins = true 
   },

   KeySystem = false, 
   KeySettings = {
      Title = "Untitled",
      Subtitle = "Key System",
      Note = "No method of obtaining the key is provided",
      FileName = "Key",
      SaveKey = true, 
      GrabKeyFromSite = false, 
      Key = {"2026"} 
   }
})
--

-- as tabs- 
local mainTab = Window:CreateTab("Main", "user")
local teleportTab = Window:CreateTab("Teleport", "map")

local BASEPLATE_CF = CFrame.new(968, 20, 23088)

local SPAWN_POSITIONS = {
    CFrame.new(64.84335, 440.75439, 60.43266),
    CFrame.new(186.90005, 441.11267, -208.81953)
}
local SPAWN2_CF = SPAWN_POSITIONS[2]
local function getRandomSpawn()
    return SPAWN_POSITIONS[math.random(#SPAWN_POSITIONS)]
end

local autoTP = false

local LOW_HP = 10
local SAFE_HP = 50
local TP_COOLDOWN = 5

local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local LocalPlayer = Players.LocalPlayer

local escaped = false
local lastTP = 0

local function getHumanoid()
    local char = LocalPlayer.Character
    if char then
        return char:FindFirstChildOfClass("Humanoid"), char:FindFirstChild("HumanoidRootPart")
    end
end

LocalPlayer.CharacterAdded:Connect(function()
    escaped = false
    lastTP = 0
end)
local function setupHumanoid(char)
    local hum = char:WaitForChild("Humanoid")
    hum.Died:Connect(function()
        escaped = false
        lastTP = 0
    end)
end

if LocalPlayer.Character then
    setupHumanoid(LocalPlayer.Character)
end
LocalPlayer.CharacterAdded:Connect(setupHumanoid)

RunService.Heartbeat:Connect(function()
    if not autoTP then return end

    local humanoid, hrp = getHumanoid()
    if not humanoid or not hrp then return end

    local hp = humanoid.Health
    local t = tick()

    if not escaped and hp <= LOW_HP and t - lastTP > TP_COOLDOWN then
        escaped = true
        lastTP = t
        hrp.CFrame = BASEPLATE_CF
    end
    if escaped and hp >= SAFE_HP and t - lastTP > TP_COOLDOWN then
        escaped = false
        lastTP = t
        hrp.CFrame = getRandomSpawn()
    end
end)
local targetids = {
    [14046756619] = true,[13309500827] = true,[13376962659] = true,
    [15290930205] = true,[13630786846] = true,[16597912086] = true,[10468665991] = true
}

local sixmeterids = {
    [10466974800] = true,[17799224866] = true,[12534735382] = true,[10470104242] = true
}

local sevenpointfivemeterids = {
    [15295895753] = true
}

local fifteenmeterids = {
    [16597912086] = true,[16431491215] = true
}

local specialid = 16139108718

local timecheckids = {
    [12272894215] = true,[12296882427] = true
}

local delayids = {
    [12509505723] = true,[17857788598] = true,[14299135500] = true,[14351441234] = true
}

local delayidranges = {
    [12509505723] = 36,[17857788598] = 36,[14299135500] = 9,[14351441234] = 10
}

local function ActivateCounterTool()
    local backpack = LocalPlayer:FindFirstChild("Backpack")
    if not backpack then return end
    local tool = backpack:FindFirstChild("Prey's Peril") or backpack:FindFirstChild("Split Second Counter")
    if tool then
        tool.Parent = LocalPlayer.Character
        tool.Parent = backpack
    end
end

local function PressF()
    VirtualInputManager:SendKeyEvent(true, Enum.KeyCode.F, false, nil)
    VirtualInputManager:SendKeyEvent(false, Enum.KeyCode.F, false, nil)
end

local function GetAnimations(player)
    local char = player.Character
    if not char then return {} end
    local hum = char:FindFirstChild("Humanoid")
    if not hum then return {} end
    local animator = hum:FindFirstChild("Animator")
    if not animator then return {} end

    local anims = {}
    for _, track in pairs(animator:GetPlayingAnimationTracks()) do
        local id = tonumber(track.Animation.AnimationId:match("%d+$"))
        if id then
            anims[id] = track.TimePosition
        end
    end
    return anims
end
RunService.RenderStepped:Connect(function()
    if not AutoCounter then return end

    local char = LocalPlayer.Character
    if not char or not char.PrimaryPart then return end
    local myPos = char.PrimaryPart.Position

    for _, plr in pairs(Players:GetPlayers()) do
        if plr ~= LocalPlayer and plr.Character and plr.Character.PrimaryPart then
            local dist = (plr.Character.PrimaryPart.Position - myPos).Magnitude
            if dist <= 36 then
                local anims = GetAnimations(plr)

                for id, timePos in pairs(anims) do
                    if id == 15295895753 then
                        task.delay(0.5, ActivateCounterTool)

                    elseif id == 14351441234 then
                        if timePos < 0.45 and dist <= delayidranges[id] then
                            ActivateCounterTool()
                        end

                    elseif timecheckids[id] then
                        if timePos < 0.15 and dist <= 10 then
                            ActivateCounterTool()
                        end

                    elseif delayids[id] then
                        if dist <= delayidranges[id] then
                            task.delay(0.15, ActivateCounterTool)
                        end

                    else
                        if fifteenmeterids[id] and dist <= 15 then
                            ActivateCounterTool()
                        elseif sevenpointfivemeterids[id] and dist <= 10 then
                            ActivateCounterTool()
                        elseif sixmeterids[id] and dist <= 9 then
                            ActivateCounterTool()
                        elseif dist <= 36 then
                            if id == specialid then
                                PressF()
                            elseif targetids[id] then
                                ActivateCounterTool()
                            end
                        end
                    end
                end
            end
        end
    end
end)
mainTab:CreateDivider()

mainTab:CreateToggle({
   Name = "Speed Boost",
   CurrentValue = false,
   Flag = "SpeedBoostToggle",
   Callback = function(Value)
       tpwalking = Value
   end,
})

mainTab:CreateSlider({
   Name = "Speed",
   Range = {0, 5},
   Increment = 0.1,
   Suffix = "*",
   CurrentValue = 0.1,
   Flag = "SpeedBoostSlider",
   Callback = function(Value)
       tspeed = Value
   end,
})

runService.Heartbeat:Connect(function()
    if tpwalking and character and humanoid then
        if humanoid.MoveDirection.Magnitude > 0 then
            if tspeed then
                 humanoidRootPart.CFrame = humanoidRootPart.CFrame + (humanoid.MoveDirection * tspeed)
            end
        end
    end
end)

mainTab:CreateToggle({
   Name = "Jump Boost",
   CurrentValue = false,
   Flag = "JumpBoostToggle",
   Callback = function(Value)
       humanoid.UseJumpPower = not Value
   end,
})

mainTab:CreateSlider({
   Name = "Jump",
   Range = {7.2, 500},
   Increment = 0.1,
   Suffix = "%",
   CurrentValue = 7.2,
   Flag = "JumpBoostSlider",
   Callback = function(Value)
       humanoid.JumpHeight = Value
   end,
})

mainTab:CreateDivider()

mainTab:CreateToggle({
   Name = "Auto Counter",
   CurrentValue = false,
   Callback = function(Value)
       AutoCounter = Value
   end
})
mainTab:CreateToggle({
    Name = "Auto TP When Low HP",
    CurrentValue = false,
    Flag = "AutoTPCycle",
    Callback = function(Value)
        autoTP = Value
    end,
})

mainTab:CreateDivider()

mainTab:CreateSection("Exploits")

mainTab:CreateToggle({
   Name = "No Dash Cooldown",
   CurrentValue = false,
   Flag = "noDashCooldownToggle",
   Callback = function(Value)
       workspace:SetAttribute("NoDashCooldown", Value)
   end,
})

mainTab:CreateToggle({
   Name = "No Fatigue",
   CurrentValue = false,
   Flag = "noFatigueToggle",
   Callback = function(Value)
       workspace:SetAttribute("NoFatigue", Value)
   end,
})

mainTab:CreateDivider()

mainTab:CreateToggle({
   Name = "Emotes Extra Slots",
   CurrentValue = false,
   Flag = "emotesExtraSlotsToggle",
   Callback = function(Value)
         localPlayer:SetAttribute("ExtraSlots", Value)
   end,
})
mainTab:CreateToggle({
   Name = "Emotes Search Bar",
   CurrentValue = false,
   Flag = "emotesSearchBarToggle",
   Callback = function(Value)
       localPlayer:SetAttribute("EmoteSearchBar", Value)
   end,
})

teleportTab:CreateSection("Teleports")

teleportTab:CreateButton({
    Name = "middle",
    Callback = function()
        humanoidRootPart.CFrame = CFrame.new(148, 441, 27)
    end
})

teleportTab:CreateButton({
    Name = "Atomic Room",
    Callback = function()
        humanoidRootPart.CFrame = CFrame.new(1079, 155, 23003)
    end
})

teleportTab:CreateButton({
    Name = "Death Counter Room",
    Callback = function()
        humanoidRootPart.CFrame = CFrame.new(-92, 29, 20347)
    end
})

teleportTab:CreateButton({
    Name = "Baseplate",
    Callback = function()
        humanoidRootPart.CFrame = CFrame.new(968, 20, 23088)
    end
})

teleportTab:CreateButton({
    Name = "Mountain 1",
    Callback = function()
        humanoidRootPart.CFrame = CFrame.new(266, 699, 458)
    end
})

teleportTab:CreateButton({
    Name = "Mountain 2",
    Callback = function()
        humanoidRootPart.CFrame = CFrame.new(551, 630, -265)
    end
})

teleportTab:CreateButton({
    Name = "Mountain 3",
    Callback = function()
        humanoidRootPart.CFrame = CFrame.new(-107, 642, -328)
    end
})

teleportTab:CreateButton({
    Name = "Spawn 2",
    Callback = function()
        humanoidRootPart.CFrame = SPAWN2_CF
    end
})
local aimTab = Window:CreateTab("load", "target")
local silentAimScript

aimTab:CreateToggle({
    Name = "Silent Aim GUI",
    CurrentValue = false,
    Flag = "SilentAimLoadToggle",
    Callback = function(Value)

        if Value then

            silentAimScript = loadstring([[
                local Players = game:GetService("Players")
                local RunService = game:GetService("RunService")
                local LocalPlayer = Players.LocalPlayer

                local silentAim = true
                local MIN_DISTANCE = 4.2

                local character = LocalPlayer.Character or LocalPlayer.CharacterAdded:Wait()
                local hrp = character:WaitForChild("HumanoidRootPart")

                LocalPlayer.CharacterAdded:Connect(function(char)
                    character = char
                    hrp = character:WaitForChild("HumanoidRootPart")
                end)

                -- GUI
                local gui = Instance.new("ScreenGui")
                gui.Name = "SilentAimGuiV4"
                gui.ResetOnSpawn = false
                gui.DisplayOrder = 999999
                gui.ZIndexBehavior = Enum.ZIndexBehavior.Global
                gui.Parent = LocalPlayer:WaitForChild("PlayerGui")

                local frame = Instance.new("Frame")
                frame.Size = UDim2.new(0,170,0,60)
                frame.Position = UDim2.new(0.5,-90,0.2,0)
                frame.BackgroundColor3 = Color3.fromRGB(25,25,25)
                frame.BorderSizePixel = 0
                frame.Active = true
                frame.Draggable = true
                frame.Parent = gui

                local corner = Instance.new("UICorner", frame)
                corner.CornerRadius = UDim.new(0,12)

                local stroke = Instance.new("UIStroke", frame)
                stroke.Thickness = 2
                stroke.Color = Color3.fromRGB(0,255,0)

                local title = Instance.new("TextLabel", frame)
                title.Size = UDim2.new(1,0,0.4,0)
                title.BackgroundTransparency = 1
                title.Text = "Silent Aim"
                title.TextScaled = true
                title.Font = Enum.Font.GothamBold
                title.TextColor3 = Color3.fromRGB(200,200,200)

                local button = Instance.new("TextButton", frame)
                button.Size = UDim2.new(0.85,0,0.4,0)
                button.Position = UDim2.new(0.1,0,0.5,0)
                button.BackgroundColor3 = Color3.fromRGB(35,35,35)
                button.BorderSizePixel = 0
                button.Text = "ON"
                button.TextScaled = true
                button.Font = Enum.Font.GothamBold
                button.TextColor3 = Color3.fromRGB(0,255,0)

                local bcorner = Instance.new("UICorner", button)
                bcorner.CornerRadius = UDim.new(0,8)

                local function getClosestLiving()
                    local closest
                    local dist = math.huge

                    for _,v in pairs(workspace:GetDescendants()) do
                        if v:IsA("Humanoid") and v.Health > 0 and v.Parent:FindFirstChild("HumanoidRootPart") then
                            if Players:GetPlayerFromCharacter(v.Parent) ~= LocalPlayer then
                                local d = (v.Parent.HumanoidRootPart.Position - hrp.Position).Magnitude
                                if d < dist then
                                    dist = d
                                    closest = v.Parent
                                end
                            end
                        end
                    end

                    return closest, dist
                end

                local aimConn
                aimConn = RunService.Heartbeat:Connect(function()
                    if silentAim and hrp then
                        local target, dist = getClosestLiving()
                        if target and target:FindFirstChild("HumanoidRootPart") and dist > MIN_DISTANCE then
                            local pos = target.HumanoidRootPart.Position
                            hrp.CFrame = CFrame.new(hrp.Position, Vector3.new(pos.X, hrp.Position.Y, pos.Z))
                        end
                    end
                end)

                button.MouseButton1Click:Connect(function()
                    silentAim = not silentAim

                    if silentAim then
                        button.Text = "ON"
                        button.TextColor3 = Color3.fromRGB(0,255,0)
                        stroke.Color = Color3.fromRGB(0,255,0)
                        frame.BackgroundColor3 = Color3.fromRGB(25,30,25)
                    else
                        button.Text = "OFF"
                        button.TextColor3 = Color3.fromRGB(120,120,120)
                        stroke.Color = Color3.fromRGB(120,120,120)
                        frame.BackgroundColor3 = Color3.fromRGB(30,25,25)
                    end
                end)

                getgenv().RemoveSilentAim = function()
                    if aimConn then aimConn:Disconnect() end
                    gui:Destroy()
                end
            ]])()

        else
            if getgenv().RemoveSilentAim then
                getgenv().RemoveSilentAim()
            end
        end
    end
})
aimTab:CreateSection("loadstring")
aimTab:CreateButton({
    Name = "Extra Hitbox [DANGER]",
    Callback = function()
        loadstring(game:HttpGet("https://rawscripts.net/raw/The-Strongest-Battlegrounds-SION-ELTNAM-ATLASIA-61168"))()
    end,
})
aimTab:CreateButton({
    Name = "Trashcan Man",
    Callback = function()
        loadstring(game:HttpGet("https://raw.githubusercontent.com/yes1nt/yes/refs/heads/main/Trashcan%20Man"))()
    end,
})
